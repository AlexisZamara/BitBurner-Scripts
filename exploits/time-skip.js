/** @param {NS} ns **/

let doc = eval("document");
export async function main(ns) {
	let skip = ns.args[0] ?? 1;
	skip = skip * 60 * 1000; // always in minutes
	let engineDiv = document.querySelector("#root > div");
	let playerDiv = document.querySelector("#root > div > div.MuiBox-root");
	playerDiv[Object.keys(playerDiv)[1]].children[0].props.player.lastUpdate -= skip; // rewind time
	engineDiv[Object.keys(engineDiv)[0]].pendingProps.children.props.engine._lastUpdate -= skip;
	engineDiv[Object.keys(engineDiv)[0]].pendingProps.children.props.player.lastUpdate -= skip;
	let button = doc.querySelector("#root > div > div.MuiPaper-root.MuiPaper-elevation.MuiPaper-elevation1.jss5.react-draggable.react-draggable-dragged > div.MuiCollapse-root.MuiCollapse-vertical.jss8 > div > div > div > div.MuiBox-root > button");
	let save = button[Object.keys(button)[1]].onClick;
	eval(save({isTrusted: true})); // we quicksave so the modifications are taken into account
}